ステートレスとステートフル
    ステートレス
        状態を保持しない
        前の通信を引き継がせない、1つの通信が独立している
        HTTP通信は、ステートレスな通信
    ステートフル
        状態を保持する
        CookieとSessionを用いてステートフルを表現する

Cookieとは
    正式名称：HTTP Cookie
    クライアントに保持された情報のことを指す
    信用できない情報
    変更されて困る情報をCookieで扱ってはいけない
    他人のCookieを盗むのは犯罪

Sessionとは
    一連の処理の始まりから終わりまでを表す概念のことを指す
    Webサイトにアクセスして行う一連の操作や行動
    セッション（コンピューター）とは
        一連のインタラクティブな操作のこと。
        典型的にはログインしてからログアウトするまでが一つのログインセッション
    HTTPのセッションとは
        一連の通信のこと。
        典型的には接続を確立してから切断するまでが一つのセッション。
        HTTPのセッションは「セッションID」を使って同一セッションを管理する。
        セッションIDはHTTP cookieに保存してHTTPヘッダに格納して送受信したり、
        URLに埋め込んでGETメソッドで送受信したりする。
    セッションハイジャック
        通信当事者以外がセッションを乗っ取る行為。
    セッション層
        OSI参照モデルの第5層。
        アプリケーション・プロセス間でセッションの開始、終了、管理の機構、すなわち半永続的な対話を提供する。

    具体例
        ネットショッピングの場合
            ログインし、商品をカートに入れ、購入までの一連の処理（セッション）として取り扱いたい
            HTTPはステートレスなため、Cookieを利用して、一連の処理（セッション）として扱う
        
        Cookieに一意の値を入れ、リクエストするときにCookieにある値も一緒に送ってもらうことで識別可能となり、一連の処理として取り扱える
        Cookieを利用することで、セッション管理が行える

    Cookieを使ってセッション管理をするのが一般的

セッション管理の目的
    Web通信に使用されるHTTPがステートレスな（状態を保持しない）プロトコルであるため
    会員制のサイトでは、クライアントのログイン状態を識別する必要がある
    同じページに対すrリクエストでも、未ログインのクライアントとログイン済みのクライアントであれば異なる内容を表示しなければならない
    つまり、「ログイン済みの状態であるか」は、セッションごとに管理される必要がある。
    Cookie等の機能を用いてクライアントを識別し、Webサイト上におけるクライアントの状態にかかわる情報をリクエスト間で保持することが、セッション管理の根本的な目的といえる

セッションの作成過程
    セッションの基本原理は、各セッションごとの情報をサーバーサイトで保持することにある
    クライアントとサーバはグローバルかつユニークなIDによって紐づけられ、このIDをクライアントがリクエストすることで、サーバに保存されたセッション情報へのアクセスを可能にする。

    サーバーサイドにおけるセッション生成の過程
        １．グローバルかつユニークなセッションIDを生成する
        ２．セッション情報を保存する領域を確保する
        ３．セッションIDをクライアントに送信する

セッション管理機構の設計
    必要な機能を洗い出す
    個別のセッションと複数のセッションを並行して管理するためのセッションマネージャに分けて考える

    個別のセッションに必要な実装
        セッション間の管理はセッションマネージャに任せることができるため、以下の機能が備わっていればOK
            ・セッションの構造定義
            ・セッションのインスタンス化
            ・セッション変数の取り扱い
    
    セッションマネージャに必要な実装
        ・セッションマネージャの構造定義
        ・ユニークなセッションIDの発行
        ・クライアント情報とセッション情報の関連付け
        ・セッションの生成・保存・破棄

        まず、各クライアントの識別に用いられるセッションIDは、完全にグローバルでユニークである必要があり、重複は許されない
        したがって、IDの発行は個別のセッションではなくセッションマネージャが保証しなければならない

        また、セッションがクライアント毎のデータ保持という目的を果たすためには、クライアントから送信されるリクエストからセッションIDを抽出し、サーバーに保存されたセッション情報と紐づける必要がある
        このID管理もまた、セッションマネージャに置いて適切に行われなければならない

        さらに、サーバーサイドに保存されたセッション情報の管理もセッションマネージャの役割
        セッションに紐づく情報は、必要な期間だけ保存されていなければならない
        同時に、保存期間を超えたり、明示的に破棄を要求されたセッション情報は、確実に破棄されなければならない

        これらの機能をセッションマネージャに実装していくことになる
        
    